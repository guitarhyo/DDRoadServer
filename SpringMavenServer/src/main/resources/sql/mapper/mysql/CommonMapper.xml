<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="CommonDao">

<select id="selectBoard" resultType="map">
	select * from BOARD
</select>

<select id="selectUserList" resultType="com.ddroad.model.UserVO">
	select * from USERS
</select>
<select id="selectUserNickname" resultType="int" parameterType="string">
	select COUNT(1) from USERS where nickname = #{nickname}
</select>

<select id="selectByUser" resultType="com.ddroad.model.UserVO" parameterType="string">
	select * from USERS where id=#{id}
</select>

<select id="selectById" resultType="int" parameterType="string">
	select count(1) from USERS where id=#{id}
</select>

<insert id="join" parameterType="com.ddroad.model.UserVO">
	INSERT INTO USERS (id,email,name,accesstoken) VALUES (#{id}, #{email}, #{name},#{accesstoken})
</insert>

<update id="updateNickName" parameterType="com.ddroad.model.UserVO">
	update 
		USERS set 
			nickname = #{nickname}
		where
	 		id = #{id}
</update>

<insert id="write" parameterType="com.ddroad.model.BoardVO">
	INSERT INTO BOARD (title,writer,nickname,contents) VALUES (#{title}, #{writer}, #{nickname}, #{contents})
</insert>
<!-- DELETE writing -->
<delete id="deleteWriting" parameterType="string">
	DELETE FROM BOARD WHERE id=#{id}
</delete>
<!-- look up writing -->
<select id="lookupContents" parameterType="String" resultType="com.ddroad.model.BoardVO">
	SELECT * FROM BOARD WHERE id=#{id}
</select>
<!-- modify writing -->
<select id="modifyWriting" parameterType="com.ddroad.model.BoardVO">
	UPDATE BOARD SET title=#{title}, contents=#{contents} WHERE id=#{id};	
</select>
</mapper>